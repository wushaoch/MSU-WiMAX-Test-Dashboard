var map;
function initAutocomplete(){function a(a,d,c){d.setPosition(c);d.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.");d.open(map)}map=new google.maps.Map(document.getElementById("map"),{scaleControl:!0,zoom:14,minZoom:14,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},center:{lat:42.70444651,lng:-84.48442291000003},mapTypeId:"hybrid",
mapTypeControl:!0,fullscreenControl:!0,fullscreenControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},rotateControl:!0});var d;d=new google.maps.InfoWindow;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){d.setPosition({lat:a.coords.latitude,lng:a.coords.longitude});d.setContent("You Are Here");d.open(map)},function(){a(!0,d,map.getCenter())}):a(!1,d,map.getCenter());var c=document.getElementById("legend");map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(c);
c=document.createElement("script");c.src="convert/master.json";document.getElementsByTagName("head")[0].appendChild(c);new google.maps.Marker({position:{lat:42.7176737,lng:-84.48485924},map:map,icon:"assets/base_station.png"});(new google.maps.Polyline({path:[{lat:42.686397,lng:-84.52909124},{lat:42.7176737,lng:-84.48485924},{lat:42.686397,lng:-84.44062724}],geodesic:!0,strokeColor:"#000",strokeOpacity:1,strokeWeight:3})).setMap(map);map.data.addListener("click",function(a){var c=a.feature.getProperty("received_throughput"),
e=a.feature.getProperty("time"),k=a.feature.getGeometry().get(),f=a.feature.getProperty("id"),n="",l="";if(999==c)n="<b style='color:red;'>NO CONNECTION</b>";else{var n=25>c?"<b style='color:#FF9000;'>POOR CONNECTION</b>":"<b style='color:green;'>SUCCESSFUL CONNECTION</b>",l=a.feature.getProperty("sent_throughput"),p=a.feature.getProperty("base_station_signal_strength"),q=a.feature.getProperty("subscriber_unit_signal_strength"),t=a.feature.getProperty("base_station_SNR");a=a.feature.getProperty("subscriber_unit_SNR");
l="Downlink Throughput: <b>"+c+"</b> Mbps<br>Uplink Throughput: <b>"+l+"</b> Mbps<br>BSU Signal: <b>"+p+"</b> dBm<br>SU Signal: <b>"+q+"</b> dBm<br>BSU SNR: <b>"+t+"</b> dB<br>SU SNR: <b>"+a+"</b> dB<br>"}c="<h4 id='info_window_header'>"+n+"</h4>"+("<p  id='info_window_body'>"+l+"</p>")+("<p  id='info_window_footer'>"+("Date: "+e+"<br>ID: "+f)+"</p>");d.setPosition(k);d.setContent(c);d.open(map);map.panTo(k);if(1==doesPhotoIDExist(f)){var k="'photos/"+f+".jpg'",m=document.getElementById("myModal"),
f=document.getElementById("modal_content"),c=document.getElementById("info_window_header");document.getElementsByClassName("close")[0].onclick=function(){m.style.display="none"};document.getElementById("info_window_header").setAttribute("class","underline");f.setAttribute("style","background-image: url("+k+");                 background-size: cover;                 background-repeat: no-repeat;                 background-position: 50% 50%;             ");c.onclick=function(){m.style.display="block"};
window.onclick=function(a){a.target==m&&(m.style.display="none")}}});map.data.setStyle(function(a){var c=normalizeMag(a.getProperty("sent_throughput"),100,0);a=1==doesPhotoIDExist(a.getProperty("id"))?"#fff":"black";return{icon:getCircle(c,7,2,.8,a)}});map.data.addListener("mouseover",function(a){map.data.revertStyle();var c=normalizeMag(a.feature.getProperty("sent_throughput"),100,0),d=1==doesPhotoIDExist(a.feature.getProperty("id"))?"#fff":"black";map.data.overrideStyle(a.feature,{icon:getCircle(c,
11,3,1,d)})});map.data.addListener("mouseout",function(a){map.data.revertStyle()})}function getCircle(a,d,c,e,h){d=void 0===d?7:d;c=void 0===c?2:c;e=void 0===e?.8:e;h=void 0===h?"black":h;a=getColor(a);return{path:google.maps.SymbolPath.CIRCLE,fillColor:a,fillOpacity:e,scale:d,strokeColor:h,strokeWeight:c,strokeOpacity:1}}function normalizeMag(a,d,c){return 999==a?-1:100*(a-c)/(d-c)}
function getColor(a){if(-1==a)return"red";if(-2==a)return"#FFFFFF";if(75<=a&&100>a){var d=Math.round(160+-160*(a-75)/25),c=Math.round(226+29*(a-75)/25);a=Math.round(45+52*(a-75)/25)}else 50<=a&&75>a?(d=Math.round(255+-95*(a-50)/25),c=Math.round(244+-18*(a-50)/25),a=Math.round(0+45*(a-50)/25)):(d=Math.round(255+0*a/50),c=Math.round(144+100*a/50),a=Math.round(0+0*a/50));return RgbDecToHex(d,c,a)}
function RgbDecToHex(a,d,c){r=a.toString(16);g=d.toString(16);b=c.toString(16);16>a&&(r="0"+r);16>d&&(g="0"+g);16>c&&(b="0"+b);return"#"+r+g+b}function datafeed_callback(a){map.data.addGeoJson(a)};